(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{745:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#工程化进阶二"}},[s._v("工程化进阶二")])])])]),a("p"),s._v(" "),a("h3",{attrs:{id:"工程化进阶二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工程化进阶二"}},[s._v("#")]),s._v(" 工程化进阶二")]),s._v(" "),a("h4",{attrs:{id:"vite-第二代工程化工具-脚手架-编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vite-第二代工程化工具-脚手架-编译"}},[s._v("#")]),s._v(" vite -- 第二代工程化工具：脚手架 + 编译")]),s._v(" "),a("ul",[a("li",[s._v("模式")])]),s._v(" "),a("ol",[a("li",[s._v("冷启动 / 冷服务 => 开发状态下不重新走编译打包")]),s._v(" "),a("li",[s._v("热更新 => 更新源文件时依旧可以实时更新视图")]),s._v(" "),a("li",[s._v("按需更新 => 不刷新所有节点，只更新改动部分")])]),s._v(" "),a("ul",[a("li",[s._v("综合队比")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("webpack - 编译支撑开发\n打包生成bundle => 启动dev-server => 建立开发环境\nHMR => 改动到的模块以及相关依赖重新打包编译")])]),s._v(" "),a("li",[a("p",[s._v("vite - 路由劫持 + 实时编译\n启动dev-server => 直接请求所需模块并且实时编译（rollup js模块打包器 AMD CJS => ESM）\nHMR => 让浏览器重新请求当前页面所需模块 => 利用浏览器的强缓存和协商缓存优化请求（源码模块协商缓存，依赖模块用强缓存）")])])]),s._v(" "),a("ul",[a("li",[s._v("开发环境 vs 正式环境 => 运行时 vs 编译打包\ndev:")])]),s._v(" "),a("ol",[a("li",[s._v("依赖预构建 cjs / AMD => ESM")]),s._v(" "),a("li",[s._v("依赖缓存到 node_modules/.vite")]),s._v(" "),a("li",[s._v("package.json / lockfile / vite.config.js => 三者之一触发 => 重新预构建")]),s._v(" "),a("li",[s._v("通过浏览器的缓存机制 => 缓存请求处理 => 页面性能")])]),s._v(" "),a("p",[s._v("prod:")]),s._v(" "),a("ol",[a("li",[s._v("整体依赖rollup打包")])]),s._v(" "),a("h5",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安装vite")]),s._v("\nnpm init vite"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("app zhaowa\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("一键式搭建完成vue3.0的环境")]),s._v(" "),a("h5",{attrs:{id:"特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[s._v("#")]),s._v(" 特性")]),s._v(" "),a("ul",[a("li",[a("ol",[a("li",[s._v("原生的ts支持")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("script lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("ol",{attrs:{start:"2"}},[a("li",[s._v("原生的文件引入支持\n支持css文件直接引入")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./zhaowa/src/assets/reset.css'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("支持json文件的直接引入")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./zhaowa/src/assets/mock.json'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("ol",{attrs:{start:"3"}},[a("li",[s._v("新增依赖支持\nvite.config.js\n")])])])]),s._v(" "),a("h4",{attrs:{id:"原理实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理实践"}},[s._v("#")]),s._v(" 原理实践：")]),s._v(" "),a("ol",[a("li",[s._v("ESM静态定义，编译时做加载 => 生成只读引用")]),s._v(" "),a("li",[s._v("路由脚本进入只引用需要被加载模块from只读引用 => 实时编译运行包含依赖的代码")]),s._v(" "),a("li",[s._v("浏览器缓存优化 => 分模块按需加载，未变化直接用缓存 / 模块变化只更新模块")])]),s._v(" "),a("h4",{attrs:{id:"面试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#面试"}},[s._v("#")]),s._v(" 面试:")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("入口是如何查找的？\nlocalhost始终会第一次加载当前html模板 => 通过模板或者插件的设置，找到main.js")])]),s._v(" "),a("li",[a("p",[s._v("vite是如何区分依赖以及本地文件的？\nhttp://localhost:3000/@modules/vue.js => @modules")])])]),s._v(" "),a("p",[s._v("追问：确定node_modules？如何拼装？\n=> vite会做正则匹配/^/@modules// => 请求拦截 => 去node_moudles查找")]),s._v(" "),a("p",[s._v("import HelloWorld from '../..'\nimport vue from 'Vue'\n=> 特化处理当做外部依赖查找替换")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("vite如何处理vue文件的？\nvue第一优先级处理体现 => 匹配.vue文件 => 拆分三个文件返回 => vue文件每部分都可以分别做缓存")])]),s._v(" "),a("li",[a("p",[s._v("热更新如何实现？\n=> 独立服务websocket => 推送热更新提醒")])])]),s._v(" "),a("h4",{attrs:{id:"前端测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端测试"}},[s._v("#")]),s._v(" 前端测试")]),s._v(" "),a("h5",{attrs:{id:"单元测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单元测试"}},[s._v("#")]),s._v(" 单元测试")]),s._v(" "),a("ul",[a("li",[a("ol",[a("li",[s._v("覆盖率")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("number "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 覆盖率 => 50%")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[a("ol",{attrs:{start:"2"}},[a("li",[s._v("单元拆分 => 逻辑、视图层面准备")])])]),s._v(" "),a("li",[a("ol",{attrs:{start:"3"}},[a("li",[s._v("环境准备")])])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 依赖安装")]),s._v("\nnpm i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev jest\nnpm i @type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jest babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jest @vue"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("utlis@next @testing"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dom ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jest vue"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jest @babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("preset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("env "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("save"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 配置babel")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// jest文件支持es6语法")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 配置jest")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h5",{attrs:{id:"e2e测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#e2e测试"}},[s._v("#")]),s._v(" E2E测试")]),s._v(" "),a("p",[s._v("业务功能触发，不关注具体实现，只验证是否实现业务功能 => 开发 or 测试")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装\nnpm init -y\nnpm i -D cypress")])]),s._v(" "),a("li",[a("p",[s._v("启动\n./node_modules/.bin/cypress run")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);